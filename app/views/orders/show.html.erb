<h1>Order Details</h1>

<p>Order ID: <%= @order.id %></p>
<p>Customer Name: <%= @order.customer.name %></p>
<p>Address: <%= @order.customer.address %></p>
<p>Province: <%= @order.customer.province %></p>
<p>Date: <%= @order.updated_at.strftime("%Y-%m-%d %H:%M:%S") %></p>

<h2>Items</h2>
<% @order.order_items.each do |item| %>
  <!-- 假设每个item对象都有price方法 -->
  <p><%= item.product.name %> x <%= item.quantity %> = $<%= item.price * item.quantity %></p>
<% end %>

<p>Subtotal: $<%= @order.total %></p>
<p>Taxes:</p>
<ul>
  <% if @taxes %>
    <% @taxes.each do |name, amount| %>
      <li><%= name.upcase %>: $<%= '%.2f' % amount %></li>
    <% end %>
  <% else %>
    <li>No taxes applied</li>
  <% end %>
</ul>

<!-- 确保@taxes不是nil再调用values.sum -->
<p>Total Price: $<%= '%.2f' % (@order.total + (@taxes ? @taxes.values.sum : 0)) %></p>
