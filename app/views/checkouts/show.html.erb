<!-- app/views/checkouts/show.html.erb -->

<h1>结账</h1>

<% if flash[:alert] %>
  <p><%= flash[:alert] %></p>
<% end %>

<div class="cart-summary">
  <% @cart.cart_items.each do |item| %>
    <div class="item">
      <p><%= item.product.name %>: <%= item.quantity %> x $<%= item.product.price %></p>
    </div>
  <% end %>
</div>

<p>总计: $<%= @cart.total %></p> <!-- 请确保@cart对象有一个计算总价的方法 -->

<h2>地址信息</h2>
<%= form_with model: @customer, url: checkout_path, local: true do |form| %>
  <%= form.label :name, "姓名" %>
  <%= form.text_field :name %>

  <%= form.label :address, "地址" %>
  <%= form.text_field :address %>

  <%= form.label :province, "省份" %>
  <%= form.text_field :province %>

  <%= form.label :email, "电子邮件" %>
  <%= form.email_field :email %>

  <div class="actions">
    <%= form.submit "提交订单" %>
  </div>
<% end %>
